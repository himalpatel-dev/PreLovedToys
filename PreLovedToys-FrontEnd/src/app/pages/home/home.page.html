<ion-header [translucent]="true" class="ion-no-border modern-header">
  <ion-toolbar class="gradient-toolbar">
    <ion-title class="header-title">
      <div class="title-wrapper">
        <span class="toy-icon">ðŸ§¸</span>
        <span class="title-text">PreLoved Toys</span>
      </div>
    </ion-title>
    <ion-buttons slot="end" class="header-actions">
      <ion-button routerLink="/cart" class="icon-btn">
        <ion-icon name="cart-outline" slot="icon-only"></ion-icon>
      </ion-button>
      <ion-button routerLink="/profile" class="icon-btn">
        <ion-icon name="person-circle-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-buttons slot="start">
      <ion-button routerLink="/orders" class="icon-btn">
        <ion-icon name="receipt-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="modern-content">
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <!-- Hero Search Section -->
  <div class="hero-section">
    <div class="search-wrapper">
      <div class="search-container">
        <ion-icon name="search-outline" class="search-icon"></ion-icon>
        <ion-searchbar placeholder="Search for toys, games, and more..." class="modern-searchbar" animated="true">
        </ion-searchbar>
      </div>
    </div>
  </div>

  <!-- Categories Section -->
  <div class="category-section">
    <div class="section-header">
      <h2 class="section-title">Shop by Category</h2>
      <span class="view-all">View All</span>
    </div>

    <div class="category-scroll">
      <div class="category-card" *ngFor="let cat of categories" (click)="onCategoryClick(cat)">
        <div class="category-image-wrapper">
          <img [src]="cat.image || 'https://placehold.co/80'" alt="{{ cat.name }}">
          <div class="category-overlay"></div>
        </div>
        <span class="category-name">{{ cat.name }}</span>
      </div>
    </div>
  </div>

  <!-- Products Section -->
  <div class="product-section">
    <div class="section-header">
      <h2 class="section-title">New Arrivals</h2>
      <span class="product-count">{{ products.length }} items</span>
    </div>

    <ion-grid class="products-grid">
      <ion-row>
        <ion-col size="6" *ngFor="let p of products">
          <div class="product-card" (click)="goToProduct(p)">
            <div class="product-image-wrapper">
              <img [src]="getProductImage(p)" alt="{{ p.title }}" />
              <div class="product-badges">
                <ion-badge class="payment-badge" [class.points]="p.isPoints" [class.cash]="!p.isPoints">
                  {{ p.isPoints ? 'ðŸ’Ž Points' : 'ðŸ’µ Cash' }}
                </ion-badge>
              </div>
              <div class="product-overlay">
                <ion-icon name="eye-outline" class="view-icon"></ion-icon>
              </div>
            </div>
            <div class="product-info">
              <h3 class="product-title">{{ p.title }}</h3>
              <p class="product-condition">
                <ion-icon name="checkmark-circle" class="condition-icon"></ion-icon>
                {{ p.condition }}
              </p>
              <div class="product-footer">
                <h4 class="product-price">
                  <span class="currency">{{ p.isPoints ? 'ðŸ’°' : 'â‚¹' }}</span>
                  <span class="amount">{{ p.price }}</span>
                </h4>
                <ion-icon name="heart-outline" class="favorite-icon"></ion-icon>
              </div>
            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <!-- Floating Action Button -->
  <ion-fab vertical="bottom" horizontal="end" slot="fixed" class="modern-fab">
    <ion-fab-button routerLink="/sell" class="sell-fab">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>